{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dines\\\\OneDrive\\\\Desktop\\\\Task 3\\\\frontend\\\\src\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport Quill from \"quill\";\nimport \"quill/dist/quill.snow.css\";\nimport { io } from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SAVE_INTERVAL_MS = 2000;\nlet socket;\nlet quill;\nexport default function Editor() {\n  _s();\n  const {\n    id: documentId\n  } = useParams();\n  useEffect(() => {\n    socket = io(\"http://localhost:3001\");\n    return () => socket.disconnect();\n  }, []);\n  useEffect(() => {\n    const editorContainer = document.getElementById(\"editor-container\");\n    quill = new Quill(editorContainer, {\n      theme: \"snow\"\n    });\n    quill.disable();\n    quill.setText(\"Loading...\");\n  }, []);\n  useEffect(() => {\n    if (!socket || !quill) return;\n    socket.once(\"load-document\", document => {\n      quill.setContents(document);\n      quill.enable();\n    });\n    socket.emit(\"get-document\", documentId);\n  }, [socket, quill, documentId]);\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const handler = delta => {\n      quill.updateContents(delta);\n    };\n    socket.on(\"receive-changes\", handler);\n    return () => socket.off(\"receive-changes\", handler);\n  }, [socket, quill]);\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const handler = delta => {\n      socket.emit(\"send-changes\", delta);\n    };\n    quill.on(\"text-change\", handler);\n    return () => quill.off(\"text-change\", handler);\n  }, [socket, quill]);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      socket.emit(\"save-document\", quill.getContents());\n    }, SAVE_INTERVAL_MS);\n    return () => clearInterval(interval);\n  }, [socket, quill]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"editor-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 10\n  }, this);\n}\n_s(Editor, \"sgZCRlg97UnCGC2yb1pyEgqs7Vo=\", false, function () {\n  return [useParams];\n});\n_c = Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useEffect","Quill","io","useParams","jsxDEV","_jsxDEV","SAVE_INTERVAL_MS","socket","quill","Editor","_s","id","documentId","disconnect","editorContainer","document","getElementById","theme","disable","setText","once","setContents","enable","emit","handler","delta","updateContents","on","off","interval","setInterval","getContents","clearInterval","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/dines/OneDrive/Desktop/Task 3/frontend/src/Editor.js"],"sourcesContent":["\nimport React, { useEffect } from \"react\";\nimport Quill from \"quill\";\nimport \"quill/dist/quill.snow.css\";\nimport { io } from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\";\n\nconst SAVE_INTERVAL_MS = 2000;\nlet socket;\nlet quill;\n\nexport default function Editor() {\n  const { id: documentId } = useParams();\n\n  useEffect(() => {\n    socket = io(\"http://localhost:3001\");\n    return () => socket.disconnect();\n  }, []);\n\n  useEffect(() => {\n    const editorContainer = document.getElementById(\"editor-container\");\n    quill = new Quill(editorContainer, { theme: \"snow\" });\n    quill.disable();\n    quill.setText(\"Loading...\");\n  }, []);\n\n  useEffect(() => {\n    if (!socket || !quill) return;\n    socket.once(\"load-document\", document => {\n      quill.setContents(document);\n      quill.enable();\n    });\n\n    socket.emit(\"get-document\", documentId);\n  }, [socket, quill, documentId]);\n\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const handler = delta => {\n      quill.updateContents(delta);\n    };\n    socket.on(\"receive-changes\", handler);\n    return () => socket.off(\"receive-changes\", handler);\n  }, [socket, quill]);\n\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const handler = delta => {\n      socket.emit(\"send-changes\", delta);\n    };\n    quill.on(\"text-change\", handler);\n    return () => quill.off(\"text-change\", handler);\n  }, [socket, quill]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      socket.emit(\"save-document\", quill.getContents());\n    }, SAVE_INTERVAL_MS);\n    return () => clearInterval(interval);\n  }, [socket, quill]);\n\n  return <div id=\"editor-container\" />;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}